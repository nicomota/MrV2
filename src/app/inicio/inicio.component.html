<!-- inicio.component.html -->
<div class="pagina">
  <aside class="sidebar" [ngClass]="{ 'retraida': sidebarRetraida }">
    <div class="sidebar-header">
      <button class="hamburger-btn" (click)="toggleSidebar()">
        <i class="bx bx-menu"></i>
      </button>
      <div class="logo" *ngIf="!sidebarRetraida">mister <strong>contador</strong></div>
    </div>
    <nav>
      <ul>
        <li class="active" (click)="navegarPara('/inicio')">
          <i class="bx bx-home"></i>
          <span *ngIf="!sidebarRetraida">Início</span>
        </li>
        <li (click)="navegarPara('/estatisticas')">
          <i class="bx bx-bar-chart-alt"></i>
          <span *ngIf="!sidebarRetraida">Cadastro de Usuários</span>
        </li>
        <!-- <li (click)="navegarPara('/registro-contabil')">
          <i class="bx bx-book"></i>
          <span *ngIf="!sidebarRetraida">Registro Contábil</span>
        </li> -->
        <li (click)="navegarPara('/nfe')">
          <i class="bx bx-file"></i>
          <span *ngIf="!sidebarRetraida">Cadastro de Usuários</span>
        </li>
        <li (click)="navegarPara('/nfse')">
          <i class="bx bx-file"></i>
          <span *ngIf="!sidebarRetraida">Contabilidade</span>
        </li>
        <li (click)="navegarPara('/comprovantes')">
          <i class="bx bx-receipt"></i>
          <span *ngIf="!sidebarRetraida">Meus dados</span>
        </li>
        <li (click)="navegarPara('/cartao-credito')">
          <i class="bx bx-credit-card"></i>
          <span *ngIf="!sidebarRetraida">Senha</span>
        </li>
        <li (click)="navegarPara('/extrato-bancario')">
          <i class="bx bx-file-blank"></i>
          <span *ngIf="!sidebarRetraida">Sair</span>
        </li>
      </ul>
    </nav>
  </aside>

  <main class="conteudo">
    <header class="topo">
      <div class="header-linha">
        <h1>Dashboard</h1>

        <!-- Informações da Empresa -->
        <div class="empresa-info-navbar">
          <div class="campo-empresa">
            <label>Empresa:</label>
            <input type="text" value="Empresa Exemplo Ltda" readonly>
          </div>
          <div class="campo-cnpj">
            <label>CNPJ:</label>
            <input type="text" value="12.345.678/0001-90" readonly>
          </div>
        </div>
      </div>

      <div class="filtros">

        <div class="dropdown">
          <div class="numeroticket">
            <label>N.º de Empresas:</label>
            <button class="btn btn-outline-seundary dropdown-toggle" data-bs-toggle="dropdown">
              10
            </button>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="#">20</a></li>
              <li><a class="dropdown-item" href="#">50</a></li>
              <li><a class="dropdown-item" href="#">100</a></li>
            </ul>
          </div>
        </div>

        <div class="dropdown">
          <div class="numeroticket">
            <label>Tickets:</label>
            <button class="btn btn-outline-seundary dropdown-toggle" data-bs-toggle="dropdown">
              Todos
            </button>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="#">Contém Ticket</a></li>
              <li><a class="dropdown-item" href="#">Não contém Ticket</a></li>
            </ul>
          </div>
        </div>

        <div class="dropdown">
          <div class="numeroticket">
            <label>Cadastro:</label>
            <button class="btn btn-outline-seundary dropdown-toggle" data-bs-toggle="dropdown">
              Todos
            </button>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="#">Cadasrando</a></li>
              <li><a class="dropdown-item" href="#">Finalizando</a></li>
            </ul>
          </div>
        </div>

        <input type="text" placeholder="Pesquisar..." class="pesquisa" />

        <div class="dropdown">
          <div class="numeroticket">
            <button class="btn btn-outline-seundary dropdown-toggle" data-bs-toggle="dropdown">
              Razão Social
            </button>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="#">CNPJ</a></li>
            </ul>
          </div>
        </div>

        <button type="button" class="btn btn-primary">Pesquisar</button>
      </div>
    </header>

    <hr />

    <section class="tabela">
      <table>
        <thead>
          <tr>
            <th class="text-center">Favorito</th>
            <th>Razão Social</th>
            <th>CNPJ</th>
            <th class="text-center">Integrações</th>
            <th>Lançamentos Conciliados</th>
            <th>Tickets</th>
            <th>Exportação/Período</th>
            <th>Usuario</th>
            <th>Visualizar</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let empresa of empresasOrdenadas; trackBy: trackByEmpresa; let i = index"
              [class.favorito]="empresa.favorito"
              [class.subindo-topo]="empresaAnimando === empresa.id"
              [@favoritoAnimation]="empresa.favorito">
            <!-- Favorito -->
            <td class="text-center">
              <button class="btn-favorito" (click)="toggleFavorito(empresa.id)" title="Favoritar empresa">
                <i class="bx" [ngClass]="empresa.favorito ? 'bxs-star' : 'bx-star'" [class.favorito-ativo]="empresa.favorito"></i>
              </button>
            </td>
            <!-- Razão Social -->
            <td>
              <a href="/registro-contabil">{{ empresa.razaoSocial }}</a>
            </td>
            <!-- CNPJ -->
            <td>{{ empresa.cnpj }}</td>
            <!-- Integrações -->
            <td class="text-center" style="font-size: 20px;">
              <i *ngFor="let integracao of empresa.integracoes"
                 class="bx {{ integracao.icon }}"
                 [style.color]="integracao.color"></i>
            </td>
            <!-- Lançamentos Conciliados -->
            <td>
              <div class="progresso-container">
                <div class="progresso-barra">
                  <div class="progresso-preenchido"
                       [ngClass]="{ 'progresso-completo': empresa.progressoConciliacao === 100 }"
                       [style.width.%]="empresa.progressoConciliacao"></div>
                </div>
                <span class="progresso-texto">{{ empresa.progressoConciliacao }}%</span>
              </div>
            </td>
            <!-- Tickets  -->
            <td>{{ empresa.tickets }}</td>
            <!-- Exportação  -->
            <td>{{ empresa.exportacao }}</td>
            <!-- Usuário  -->
            <td>{{ empresa.usuario }}</td>
            <!-- Visualizar  -->
            <td class="text-center">
              <button class="btn-visualizar" (click)="visualizarEmpresa()" title="Visualizar empresa">
                <i class="bx bx-show"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </section>
  </main>
</div>
